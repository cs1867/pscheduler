#!/usr/bin/env python3
#
# Validate the JSON file(s) named on the command line
#

import json
import sys

def die(message):
    print(message, file=sys.stderr)
    sys.exit(1)


for test_file in sys.argv[1:]:
    try:
        with open(test_file, 'r') as input_file:
            try:
                json.load(input_file)
            except json.decoder.JSONDecodeError as ex:
                die(f'{test_file}: Invalid JSON: {ex}')
    except IOError as ex:
        die(f'{test_file}: {ex}')
